<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="COM_SMS_TEMPLATE" >
  <resultMap id="BaseResultMap" class="com.lvmama.comm.pet.po.pub.ComSmsTemplate" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Apr 20 11:55:56 CST 2010.
    -->
    <result column="TEMPLATE_ID" property="templateId" />
    <result column="TEMPLATE_NAME" property="templateName" />
    <result column="CONTENT" property="content" />
    <result column="IMMEDIATELY" property="immendiately"/>
  </resultMap>
  
  <select id="selectAll" resultMap="BaseResultMap">
  	select * from COM_SMS_TEMPLATE
  </select>
  
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterClass="com.lvmama.comm.pet.po.pub.ComSmsTemplate" >
    select TEMPLATE_ID, TEMPLATE_NAME, CONTENT,IMMEDIATELY
    from COM_SMS_TEMPLATE
    where TEMPLATE_ID = #templateId#
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="com.lvmama.comm.pet.po.pub.ComSmsTemplate" >

    delete from COM_SMS_TEMPLATE
    where TEMPLATE_ID = #templateId#
  </delete>
  <insert id="insert" parameterClass="com.lvmama.comm.pet.po.pub.ComSmsTemplate" >

    insert into COM_SMS_TEMPLATE (TEMPLATE_ID, TEMPLATE_NAME, CONTENT,IMMEDIATELY)
    values (#templateId#, #templateName#, #content#, #immendiately#)
  </insert>
  <update id="updateByPrimaryKey" parameterClass="com.lvmama.comm.pet.po.pub.ComSmsTemplate" >

    update COM_SMS_TEMPLATE
    set TEMPLATE_NAME = #templateName#,
      CONTENT = #content#,
      IMMEDIATELY = #immendiately#
    where TEMPLATE_ID = #templateId#
  </update>
  
  <sql id="selectSql">
		select *
		from COM_SMS_TEMPLATE t
		<dynamic prepend="where">
			<isNotEmpty property="templateId" prepend="and">
				t.TEMPLATE_ID =
				#templateId#
			</isNotEmpty>
			<isNotEmpty property="templateName" prepend="and">
				t.TEMPLATE_NAME like '%$templateName$%'
			</isNotEmpty>
			<isNotEmpty property="content" prepend="and">
				t.CONTENT like '%$content$%'
			</isNotEmpty>
		</dynamic>
	</sql>

	<select id="getListByParams" parameterClass="java.util.Map"
		resultMap="BaseResultMap">
		SELECT * FROM (
		SELECT T.*, ROWNUM AS ROWNUM1 FROM ( select * from (

		<include refid="selectSql" />

		)) T 
		<dynamic prepend="where">
			<isNotEmpty property="maxResults">
			ROWNUM &lt;= #maxResults#
			</isNotEmpty>
		</dynamic>
		)
		<dynamic prepend="where">
			<isNotEmpty property="skipResults">
			ROWNUM1 &gt;#skipResults#
			</isNotEmpty>
		</dynamic>
	</select>

	<select id="getListCountByParams" resultClass="java.lang.Long"
		parameterClass="java.util.Map">
		select count(*) from
		(
		<include refid="selectSql" />
		)
	</select>
</sqlMap>